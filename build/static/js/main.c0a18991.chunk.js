(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,t,n){e.exports=n(38)},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(14),c=n.n(o),u=n(2),l=function(e){var t=e.filterName,n=e.setNewFilterName;return a.a.createElement("div",null,"filter shown with ",a.a.createElement("input",{value:t,onChange:function(e){n(e.target.value)}}))},s=n(4),i=n(3),m=n.n(i),d="/api/persons",f=function(){return m.a.get(d).then((function(e){return e.data}))},b=function(e){return m.a.post(d,e).then((function(e){return e.data}))},h=function(e){return m.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},p=function(e,t){return m.a.put("".concat(d,"/").concat(e),t).then((function(e){return e.data}))},E=function(e){var t=e.persons,n=e.setPersons,r=e.newName,o=e.setNewName,c=e.newNumber,u=e.setNewNumber,l=e.setErrorMessage,i=e.setErrorMessageCSS;return a.a.createElement("form",{onSubmit:function(e){e.preventDefault(),console.log("nameclick",e.target);var a={name:r,number:c};console.log(t),console.log(a);var m=t.find((function(e){return e.name===r}));if(m){if(window.confirm("".concat(r," is already added to the phonebook, replace the old number with a new one?"))){var d=Object(s.a)(Object(s.a)({},m),{},{number:c});p(m.id,d).then((function(e){i("success"),l("Person ".concat(r," updated with phone number '").concat(c,"'")),n(t.map((function(t){return m.id!==t.id?t:e}))),o(""),u("")})).catch((function(e){i("error"),l("Person ".concat(r," has already been removed from the server.")),n(t.filter((function(e){return e.id!==m.id})))}))}}else b(a).then((function(e){i("success"),l("Person ".concat(r," added with phone number '").concat(c,"'")),n(t.concat(e)),o(""),u("")}))}},a.a.createElement("div",null,"name:",a.a.createElement("input",{value:r,onChange:function(e){o(e.target.value)}})),a.a.createElement("div",null,"number:",a.a.createElement("input",{value:c,onChange:function(e){u(e.target.value)}})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add")))},v=function(e){var t=e.name,n=e.deleteNamedPerson;return a.a.createElement("div",null,t.name," ",t.number," ",a.a.createElement("button",{onClick:n},"delete"))},w=function(e){var t=e.filterPersons,n=e.deletePerson;return t.length>0?t.map((function(e){return a.a.createElement(v,{key:e.name,deleteNamedPerson:function(){return t=e.id,r=e.name,void(window.confirm("Do you really want to delete ".concat(r,"?"))&&n(t,r));var t,r},name:e})})):a.a.createElement("div",null,"No people found")},N=function(e){var t=e.persons,n=e.filterName,r=e.deletePerson,o=n?t.filter((function(e){return e.name.includes(n)})):t;return a.a.createElement(w,{filterPersons:o,deletePerson:r})},g=function(e){var t=e.message,n=e.cssClass,r=e.setErrorMessage;return null===t||""===t?null:(setTimeout((function(){r(null)}),5e3),a.a.createElement("div",{className:n},t))},P=(n(37),function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(""),s=Object(u.a)(c,2),i=s[0],m=s[1],d=Object(r.useState)(""),b=Object(u.a)(d,2),p=b[0],v=b[1],w=Object(r.useState)(""),P=Object(u.a)(w,2),j=P[0],O=P[1],S=Object(r.useState)(""),k=Object(u.a)(S,2),C=k[0],y=k[1],M=Object(r.useState)("success"),D=Object(u.a)(M,2),F=D[0],J=D[1];Object(r.useEffect)((function(){f().then((function(e){o(e)}))}),[]);return a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),a.a.createElement(g,{message:C,cssClass:F,setErrorMessage:y}),a.a.createElement(l,{filterName:j,setNewFilterName:O}),a.a.createElement("h2",null,"Add a new"),a.a.createElement(E,{persons:n,setPersons:o,newName:i,setNewName:m,newNumber:p,setNewNumber:v,setErrorMessage:y,setErrorMessageCSS:J}),a.a.createElement("h2",null,"Numbers"),a.a.createElement(N,{persons:n,deletePerson:function(e,t){console.log("called delete person ".concat(e," ").concat(t)),h(e).then((function(){console.log("delete worked"),y("Person ".concat(t," deleted")),o(n.filter((function(t){return t.id!==e})))})).catch((function(r){J("error"),y("Person ".concat(t," unable to be deleted, please refresh the page.")),o(n.filter((function(t){return t.id!==e})))}))},filterName:j}))});c.a.render(a.a.createElement(P,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.c0a18991.chunk.js.map