{"version":3,"sources":["components/Filter.js","services/persons.js","components/PersonForm.js","components/Name.js","components/NameList.js","components/Persons.js","components/Notification.js","App.js","index.js"],"names":["Filter","filterName","setNewFilterName","value","onChange","event","target","baseUrl","axios","get","then","response","data","newObject","post","id","delete","put","PersonForm","persons","setPersons","newName","setNewName","newNumber","setNewNumber","setErrorMessage","setErrorMessageCSS","onSubmit","preventDefault","console","log","nameObject","name","number","targetPerson","find","n","window","confirm","changedNumber","phoneService","returnedPerson","map","personMap","catch","error","filter","concat","type","Name","deleteNamedPerson","onClick","NameList","filterPersons","deletePerson","length","person","key","Persons","cur","includes","Notification","message","cssClass","setTimeout","className","App","useState","errorMessage","errorMessageCSS","useEffect","personService","initalPhonebook","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.c0a18991.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Filter = ({filterName, setNewFilterName}) => {\n\n  const handleFilterChange = (event) => {\n    setNewFilterName(event.target.value)\n  }\n\n\n  return (\n    <div>\n    filter shown with <input value={filterName} onChange={handleFilterChange}/>\n    </div>\n\n  )\n}\n\n\nexport default Filter\n","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst deletePerson = id => {\n  const request = axios.delete(`${baseUrl}/${id}`)\n  return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\nexport default {getAll, create, deletePerson, update} //getAll:getAll, but with magic JS6 stuff.\n","import React from \"react\";\nimport phoneService from '../services/persons.js'\n\nconst PersonForm = ({persons, setPersons, newName, setNewName, newNumber, setNewNumber, setErrorMessage, setErrorMessageCSS}) =>{\n\n\n  const handleNameChange = (event) => { setNewName(event.target.value)}\n  const handleNumberChange = (event) => { setNewNumber(event.target.value)}\n\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    console.log('nameclick', event.target)\n    const nameObject = {\n      name: newName,\n      number: newNumber\n    }\n    console.log(persons)\n    console.log(nameObject) // https://stackoverflow.com/a/30735595  some is an iterator\n    const targetPerson = persons.find(n => n.name === newName)\n    if (targetPerson) {\n      //alert(`${newName} is already added to phonebook`)\n      if (window.confirm(`${newName} is already added to the phonebook, replace the old number with a new one?`)){\n\n        const changedNumber = { ...targetPerson, number: newNumber}\n        phoneService\n          .update(targetPerson.id, changedNumber)\n          .then(returnedPerson => {\n            setErrorMessageCSS('success')\n            setErrorMessage(`Person ${newName} updated with phone number '${newNumber}'`)\n            setPersons(persons.map(personMap => targetPerson.id !== personMap.id ? personMap : returnedPerson )) //I don't like this...\n            setNewName('')\n            setNewNumber('')\n          }).catch(error => {\n            setErrorMessageCSS('error')\n            setErrorMessage(`Person ${newName} has already been removed from the server.`)\n            setPersons(persons.filter(n=>n.id !== targetPerson.id))\n          })\n\n      }\n    } else {\n    //  setPersons(persons.concat(nameObject))\n      phoneService\n        .create(nameObject) //only send the new one, not the full 'db'\n        .then(returnedPerson => {\n          setErrorMessageCSS('success')\n          setErrorMessage(`Person ${newName} added with phone number '${newNumber}'`)\n          setPersons(persons.concat(returnedPerson)) //we need to attach returnedPerson, not nameObject for the ID\n          setNewName('')\n          setNewNumber('')\n        })\n    }\n\n  }\n\n\n  return (\n    <form onSubmit={addPerson}>\n      <div>\n        name:\n        <input value={newName} onChange={handleNameChange}/>\n        </div>\n        <div>\n        number:\n        <input value={newNumber} onChange={handleNumberChange}/>\n      </div>\n\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\n\nexport default PersonForm;\n","import React from 'react'\n//it would be nice to be able to propegate a delete up the chain from here.\n\n\n\n\nconst Name = ({name, deleteNamedPerson}) => (\n  <div>{name.name} {name.number} <button onClick={deleteNamedPerson}>delete</button></div>\n)\n\nexport default Name;\n","import React from 'react'\nimport Name from './Name.js'\n\nconst NameList = ({filterPersons, deletePerson}) => {\n\n  const deletePersonConfirm = (id, name) => {\n    if (window.confirm(`Do you really want to delete ${name}?`)){\n      deletePerson(id, name)\n    }\n  }\n\n  if (filterPersons.length > 0) {\n    return (filterPersons.map(person =>\n      <Name\n        key={person.name}\n        deleteNamedPerson={() => deletePersonConfirm(person.id, person.name)}\n        name={person}/>))\n  } else {\n    return (<div>No people found</div>)\n  }\n}\n\nexport default NameList;\n","import React from \"react\";\nimport NameList from './NameList.js'\n\n\nconst Persons = ({persons, filterName, deletePerson}) => {\n\n\n  const filterPersons = filterName\n  ? persons.filter((cur) => (cur.name.includes(filterName)))\n  : persons\n\n\n  return (\n    <NameList filterPersons={filterPersons} deletePerson={deletePerson}/>\n\n  )\n}\nexport default Persons;\n","import React from 'react'\n\n\n// setErrorMessage(`the note '${note.content}' was already deleted from the server`)\n// setTimeout(()=>{\n//   setErrorMessage(null)\n// }, 5000)\n\n\nconst Notification = ({message, cssClass, setErrorMessage}) => {\n  if (message === null || message === '') {\n    return null\n  } else {\n    setTimeout(()=>{\n        setErrorMessage(null)\n      },5000\n    )\n  }\n\n  return (\n\n    <div className={cssClass}>\n      {message}\n    </div>\n  )\n}\n\nexport default Notification;\n","import React, {useState, useEffect} from \"react\"\nimport Filter from './components/Filter.js'\nimport PersonForm from './components/PersonForm.js'\nimport Persons from './components/Persons.js'\nimport personService from './services/persons.js'\nimport Notification from './components/Notification'\nimport './index.css'\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\") // We need a name change handler.\n  const [newNumber, setNewNumber] = useState(\"\") // We need a name change handler.\n  const [filterName, setNewFilterName] = useState(\"\")\n  const [errorMessage, setErrorMessage] = useState('')\n  const [errorMessageCSS, setErrorMessageCSS] = useState('success')\n\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initalPhonebook => {\n        setPersons(initalPhonebook)\n      })\n  }, []) //run at start\n\n\n  const deletePerson = (id, name) => {\n    console.log(`called delete person ${id} ${name}`)\n    personService\n      .deletePerson(id)\n      .then(() => {\n        console.log(`delete worked`)\n        setErrorMessage(`Person ${name} deleted`)\n        //promise successful, don't care about returned stuff?\n        setPersons(persons.filter(n=>n.id !== id))\n      })\n      .catch(error => {\n        setErrorMessageCSS('error')\n        setErrorMessage(`Person ${name} unable to be deleted, please refresh the page.`)\n        setPersons(persons.filter(n=>n.id !== id))\n\n      }\n\n      )\n  }\n\n\nreturn (<div>\n  <h2>Phonebook</h2>\n  <Notification message={errorMessage} cssClass={errorMessageCSS} setErrorMessage={setErrorMessage} />\n  <Filter filterName={filterName} setNewFilterName={setNewFilterName}/>\n  <h2>Add a new</h2>\n  <PersonForm\n    persons={persons}\n    setPersons={setPersons}\n    newName={newName}\n    setNewName={setNewName}\n    newNumber={newNumber}\n    setNewNumber={setNewNumber}\n    setErrorMessage={setErrorMessage}\n    setErrorMessageCSS={setErrorMessageCSS}\n    />\n  <h2>Numbers</h2>\n  <Persons persons={persons} deletePerson={deletePerson} filterName={filterName}/>\n\n\n</div>)\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}